<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180524182359742?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
  <p>原文链接：<a href="https://medium.com/@mycoralhealth/learn-to-securely-share-files-on-the-blockchain-with-ipfs-219ee47df54c" rel="nofollow">https://medium.com/@mycoralhealth/learn-to-securely-share-files-on-the-blockchain-with-ipfs-219ee47df54c</a></p>
  <p>在阅读本文之前，我们推荐你先阅读这篇文章：<span style="color:rgb(51,51,51);font-family:'SF Pro Display', Roboto, Noto, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;font-weight:700;background-color:rgb(255,255,255);"><a href="https://blog.csdn.net/liuzhijun301/article/details/79679508" rel="nofollow"><span style="font-size:16px;">200行代码实现一个区块链之一-----最简单的区块链</span></a></span></p>
  <p>最近对于区块链都火到发烧了。区块链是一项令人兴奋的技术，围绕着它有许多不错的应用，比如加密数字货币和ICO。区块链提供了一种民主化的信用机制，它不同于传统的中心化的信用机构（比如银行）。区块链可以应用于医疗健康、金融服务、社交APP等。</p>
  <p>然而从技术视角来看，区块链技术存在一些弱点。现在广泛使用的PoW共识机制将交易速度降低到几乎不可忍受的程度。等待比特币交易完成是一件令人很不爽的事情，以太猫这款应用几乎要将以太坊网络卡到宕机。</p>
  <p>这使得在区块链上存储数据和大文件成了一件毫无希望的事情。如果区块链只能存储很少的字符串以及俩点之间的转账记录，那什么时候我们才能利用区块链来存储文件和图片？难道区块链智能用来存储一些字符串吗？</p>
  <p><strong>进入IPFS</strong></p>
  <p>现在最有希望的解决方案是采用IPFS，又叫星际文件系统，它是由<span style="color:rgba(0,0,0,.84);font-family:'medium-content-serif-font', Georgia, Cambria, 'Times New Roman', Times, serif;letter-spacing:-.063px;background-color:rgb(255,255,255);"><span style="font-size:16px;">Protocol Labs创建的一个项目。它是一个点对点的分拣存储协议，每个节点都存储一部分被Hash索引的文件。如果一个客户端想获取其中一个文件，它只需要请求那个文件的Hash值，IPFS网络根据这个Hash再从存有这个文件的节点将文件传输给这个客户端。</span></span></p>
  <p><span style="color:rgba(0,0,0,.84);font-family:'medium-content-serif-font', Georgia, Cambria, 'Times New Roman', Times, serif;letter-spacing:-.063px;background-color:rgb(255,255,255);"><span style="font-size:16px;">你可以认为它的工作方式类似于<span style="color:rgba(0,0,0,.84);font-family:'medium-content-serif-font', Georgia, Cambria, 'Times New Roman', Times, serif;letter-spacing:-.063px;background-color:rgb(255,255,255);">BitTorrent。IPFS是一种类似于BitTorrent的分布式文件存储和查找系统，但它给用户提供了更多的控制权限，以及更丰富的编程接口。</span></span></span></p>
  <p><span style="color:rgba(0,0,0,.84);font-family:'medium-content-serif-font', Georgia, Cambria, 'Times New Roman', Times, serif;letter-spacing:-.063px;background-color:rgb(255,255,255);"><span style="font-size:16px;"><span style="color:rgba(0,0,0,.84);font-family:'medium-content-serif-font', Georgia, Cambria, 'Times New Roman', Times, serif;letter-spacing:-.063px;background-color:rgb(255,255,255);">通过下图可以理解IPFS的工作流程。</span></span></span></p>
  <p><span style="color:rgba(0,0,0,.84);font-family:'medium-content-serif-font', Georgia, Cambria, 'Times New Roman', Times, serif;letter-spacing:-.063px;background-color:rgb(255,255,255);"><span style="font-size:16px;"><span style="color:rgba(0,0,0,.84);font-family:'medium-content-serif-font', Georgia, Cambria, 'Times New Roman', Times, serif;letter-spacing:-.063px;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180524190318348?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></span></p>
  <p></p>
  <ol>
   <li>John想上传一个PDF文件到IPFS系统。</li>
   <li>他将PDF文件存储到工作目录。</li>
   <li>他通知IPFS想要添加这个文件，系统会生成这个文件的Hash值（IPFS生成的Hash值都以Qm开头）</li>
   <li>文件上传到IPFS</li>
  </ol>
  <p>假如John想通过IPFS将这个文件分享给同学Mary，他只需要将第3步中获得的Hash值告诉Mary，对于Mary来说，她要做的就是按照1-4步的反操作来做就可以了。Mary要做的就是利用IPFS调用这个Hash值，然后就可以从IPFS中得到这份文件的拷贝，太酷了！</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180524191404896?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><strong>安全漏洞</strong></p>
  <p>这里存在一个明显的安全漏洞。只要有人获得了这个文件的Hash值，他们就可以从IPFS中获取到这个文件。所以重要文件不适合以原生状态存在于IPFS中。除非我们采取对这些文件做一些处理，否则通过IPFS来分享重要的文件（比如健康数据和图片）将不合适。</p>
  <p><strong>进入非对称加密</strong></p>
  <p>幸运的是，在文件上传到IPFS系统前，我们有许多方法来加强文件的安全措施。非对称加密允许我们用特定接受者的公钥来对文件进行加密，这样只有这个特定的接受者才能解密这个加密文件。如果有恶意的第三方从IPFS中获取到加密文件，他们将不能解密这个文件。在这个教程里我们将用GPG来进行非对称加密。</p>
  <p>非对称加密的工作流程见下图。</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180524192326778?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;John想上传PDF文件到IPFS，但是只给Mary访问权限</p>
  <p>&nbsp; &nbsp; 2&nbsp; &nbsp; 他将PDF文件放到工作目录里面利用Mary的公钥进行加密<br></p>
  <p>&nbsp; &nbsp; 3&nbsp; &nbsp; 他通知IPFS想上传文件，IPFS对文件加密，并产生PDF文件的Hash，<br></p>
  <p>&nbsp; &nbsp; 4&nbsp; &nbsp; 他的加密文件上传到IPFS网络<br></p>
  <p>&nbsp; &nbsp; 5&nbsp; &nbsp; Mary从IPFS网络获取到PDF的加密文件，并用私钥解密这个文件从而得到PDF<br></p>
  <p>&nbsp; &nbsp; 6&nbsp; &nbsp; 第三方不能解密这个文件<br></p>
  <p><strong>区块链</strong></p>
  <p><strong>&nbsp; &nbsp; </strong>区块链如何和这个关联起来？在我们继续之前，我推荐你阅读我们以前的文章：<span style="font-family:'SF Pro Display', Roboto, Noto, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;font-weight:700;font-size:16px;"><a href="https://blog.csdn.net/liuzhijun301/article/details/79679508" rel="nofollow" style="font-family:'SF Pro Display', Roboto, Noto, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;font-weight:700;">200行代码实现一个区块链之一-----最简单的区块链</a></span><br></p>
  <p>&nbsp; &nbsp; 我们的区块链最重要的部分可以用这个图表示：<br></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525102601644?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p style="text-align:center;">&nbsp;图片来自<span style="color:rgba(0,0,0,.68);font-family:'medium-content-sans-serif-font', 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Geneva, Arial, sans-serif;text-align:center;background-color:rgb(255,255,255);">“</span><a href="https://medium.com/@mycoralhealth/code-your-own-blockchain-in-less-than-200-lines-of-go-e296282bcffc" rel="nofollow" class="markup--anchor markup--figure-anchor" style="background-color:rgb(255,255,255);color:inherit;background-repeat:repeat-x;background-position:0px .98em;font-family:'medium-content-sans-serif-font', 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Geneva, Arial, sans-serif;text-align:center;">Code your own blockchain in less than 200 lines of&nbsp;Go</a><span style="color:rgba(0,0,0,.68);font-family:'medium-content-sans-serif-font', 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Geneva, Arial, sans-serif;text-align:center;background-color:rgb(255,255,255);">”</span><br></p>
  <p>注意其中的BPM字段。现在的区块链还只能处理这种简单的文字记录，这也是为什么加密数字货币非常适合用区块链来做。你所要记录的就只是发送者、接收者和要转账的比特币数目（或以太坊等）。因为所有这些数据的Hash都要被计算和验证以保持区块链的完整性，所以用区块链来存储文件和图片绝对是一件很恐怖的事情。</p>
  <p>这也是为什么IPFS和区块链结合起来会如此强大的原因。我们不存BPM而直接存储文件的Hash！这真是一件很酷的事情！我们保持了区块链的数据简单性，同时又可以享受到IPFS带来的文件存储和分布式的点对点特性！这是一件双赢的事情。由于我们应用GPG的非对称加密来提供安全性，我们拥有一种非常优雅的方式来在区块链上“存储”（其实是存在IPFS上）、加密和分享大量数据和文件。</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/2018052510405656?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p style="text-align:center;">改进的区块链框图</p>
  <p>一个真实世界中的应用将在每个区块中存储我们的健康或实验数据的引用。当我们得到一个新的实验结果时，我们创建一个新的区块来存储加密文件的引用，而这个图片或PDF文件的加密文件是存储在IPFS网络中。</p>
  <p><strong>谈的够多了，让我们行动起来！</strong></p>
  <p>在这个教程中我们将做下列的事情：</p>
  <p></p>
  <ul>
   <li>安装GPG</li>
   <li>安装IPFS</li>
   <li>用别人的公钥加密文件</li>
   <li>上传加密文件到IPFS</li>
   <li>从另外一台电脑（或虚拟机）中下载加密文件，然后用对应的私钥去解密它</li>
  </ul>
  <p>你需要准备的东西：</p>
  <p></p>
  <ul>
   <li>第二台电脑或虚拟机。第二台电脑扮演的角色是共享你分享的文件。</li>
   <li>一个测试文件。我们建议下载这个<a href="https://s3.amazonaws.com/myriad-web/Managed+Care/IntegratedBRAC_Negative-SampleReport.pdf" rel="nofollow">测试文件</a>。这是一个简单的实验结果pdf文件。把这个文件放进工作目录下。</li>
  </ul>
  <p>够了，让我们开始吧。</p>
  <p>安装GPG</p>
  <p>让我们在俩台电脑上都下载GPG安装包。按照<a href="http://blog.ghostinthemachines.com/2015/03/01/how-to-use-gpg-command-line/" rel="nofollow">这篇文章</a>的指示去在你的操作系统上安装。在Mac电脑上，如果已经安装了<span style="color:rgba(0,0,0,.84);font-family:'medium-content-serif-font', Georgia, Cambria, 'Times New Roman', Times, serif;letter-spacing:-.063px;background-color:rgb(255,255,255);"><span style="font-size:16px;">Homebrew，最简单的方式就是打开终端输入<span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">brew install gnupg。</span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:16px;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);">当GPG装好后，按照下面的方式去在每台电脑上产生秘钥：</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:16px;"><span style="color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);">输入<span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">gpg --gen-key</span>然后根据提示选择默认选项就可以了，<span style="color:rgb(0,0,0);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:18px;letter-spacing:-.063px;background-color:rgb(255,255,255);">对于你选择的用户名和Email，</span>确定记住和保存了密码。</span></span><span style="letter-spacing:-.063px;"></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:16px;"><span style="color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525110721601?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:16px;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);">当电脑上出现gpg叫你做一些随机事情来产生秘钥时，只需要随机敲打键盘直到这个过程完成。</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:16px;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525110955826?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:16px;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525111009412?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:16px;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);">当第二台电脑上的秘钥生成后，我们需要将这个秘钥添加到第一台电脑，第一台电脑可以根据这个秘钥来加密文件，这个加密文件只有第二台电脑才能解密。</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:16px;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);">在第二台电脑上输入下面指令来导出秘钥到一个文件中，其中的Email邮箱地址是你创建秘钥时用的邮箱：</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;font-size:16px;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">gpg --export --armor &lt;your email&gt; &gt; pubkey.asc</span><br></span></span></p>
  <p>将刚才生成的pubkey.asc拷贝到第一台电脑。当拷贝到第一台电脑后，像这样引入这个秘钥文件：</p>
  <p><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">gpg --import pubkey.asc</span><br></p>
  <p><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="background-color:rgb(255,255,255);">可以输入命令</span><span style="background-color:rgba(0,0,0,.05);color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;">gpg --list-keys</span><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);">来检查秘钥文件是否成功导入。我在第二台电脑用的名字是Cory Heath,它正确的显示出来了：</span></span></p>
  <p><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525111908216?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></p>
  <p><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);">太棒了！我们已经成功完成了GPG的安装，现在转到IPFS.</span></span></p>
  <p><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);"><strong>安装IPFS</strong></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);">对俩台电脑，按照<a href="https://ipfs.io/docs/install/" rel="nofollow">这篇文章</a>的指示去在你的操作系统上安装IPFS。当安装完后，对每台电脑，用<span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">ipfs init</span>命令去初始化IPFS，用<span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">ipfs daemon</span>命令去运行IPFS的实例。</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525112429383?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525112443589?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);">太好了！我们已经完成安装工作，现在我们去加密和上传文件到IPFS。</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><strong>加密</strong></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);">让我们加密刚才下载的文件。先将这个文件命名为myriad.pdf,然后用第二台电脑的用户名去加密这个文件。</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">gpg --encrypt --recipient "Cory Heath" myriad.pdf</span><br></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525134455861?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgb(255,255,255);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">如果用ls命令检查你的工作目录，会发现一个新文件<span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">myriad.pdf.gpg</span></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);">只有第二胎电脑可以解密这个文件。试一下！将它发送给其它的朋友，他们打不开它，及时将它重命名为myfiad.pdf也没用。</span></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525134754905?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);">我们得到了pdf的加密文件，让我们上传它到IPFS。</span></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);">上传到IPFS</span></span></span></span></p>
  <p>在第一台电脑上，运行命令</p>
  <p><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">ipfs add myriad.pdf.gpg</span><br></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">将得到输出</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:rgba(0,0,0,.83921568627451);"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525135007736?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">这个以Qm开头的字符串就是文件的Hash。你可以将这个Hash发送给你的朋友，他们就能够使用这个Hash值从IPFS下载这个文件了。我们用这个命令检查一下这个文件是否在IPFS上面：<span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">ipfs pin ls</span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525135302471?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><strong>从IPFS下载文件</strong></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">在我们的第二台电脑上，根据刚才得到的文件Hash值，运行以下命令来获得刚才在第一台电脑上上传的加密文件：</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">ipfs get QmYqSCWuzG8Cyo4MFQzqKcC14ct4ybAWyrAc9qzdJaFYTL</span><br></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">从输出来看已经成功下载这个文件：</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525135707853?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><strong>解密</strong></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">我们现在是在第二台电脑上，而这个加密文件是用这台电脑上的公钥进行加密的，理论上可以用这台电脑的私钥进行解密，让我们实验一下。运行以下命令来解密这个加密文件，并且将解密后的文件另存为myriad.pdf。</span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">gpg --decrypt QmYqSCWuzG8Cyo4MFQzqKcC14ct4ybAWyrAc9qzdJaFYTL &gt; myriad.pdf</span><br></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);">关键时刻到了！我们打开这个文件试一下：</span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);">open myriad.pdf</span><br></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgba(0,0,0,.05);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180525140137910?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdXpoaWp1bjMwMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);">太棒了！我们成功下载、解密和打开了我们上传到IPFS的受保护的文件，而其他人是没有访问权限的！</span></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);"><strong>总结和下一步</strong></span></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);">给你们自己一个奖励吧!我们刚才完成的是一个非常强大的功能，它解决了当今区块链技术中非常关键的一个点。</span></span></span></span></p>
  <p><span style="font-family:Menlo, Monaco, 'Courier New', Courier, monospace;color:#000000;"><span style="letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;"><span style="color:rgba(0,0,0,.84);font-family:Menlo, Monaco, 'Courier New', Courier, monospace;letter-spacing:-.063px;background-color:rgb(255,255,255);">让我们回顾一下我们刚才做的：</span></span></span></span></p>
  <p></p>
  <ul>
   <li>认识到区块链不擅长存储文件和大数据</li>
   <li>安装并联网运行了IPFS</li>
   <li>用GPG加密了重要的文件，并且将它们存储到IPFS</li>
   <li>理解了IPFS中的Hsh并且怎样在区块链上存储这些Hash，这可以结合分布式文件存储和区块链的强大威力</li>
  </ul>
  <p>你在这里学到的东西对你来说非常有用，有许多地方可以应用到这些知识。你可以发布这个例子到线上服务器来充当你自己的IPFS节点以存储重要文件。IPFS的缺点是你的文件不能广泛传播开来，一旦你停止你的节点，你的文件将从IPFS网络中消失。为了克服这一点，你可以运行一系列云服务器来当做IPFS节点，你可以用他们来当服务主机，直到有更多节点对你的文件感兴趣并且开始存储它们。</p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/liuzhijun301/article/details/80439760,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/liuzhijun301/article/details/80439760,&quot;}">阅读更多</a> 
</div>