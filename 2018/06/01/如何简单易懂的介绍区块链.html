<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>如何简单易懂的介绍区块链 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="如何简单易懂的介绍区块链" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="首先，不要把区块链想的过于高深，它是一个分布在全球各地、能够协同运转的数据库存储系统，区别于传统数据库运作————读写权限掌握在一个公司或者一个集权手上（中心化的特征），区块链认为，任何有能力架设服务器的人都可以参与其中。来自于全球各地的掘金者在当地部署了自己的服务器，并连接到区块链网络中，成为这个分布式数据库存储系统中的一个节点；一旦加入，该节点享有铜其他所有节点完全一样的权利和义务（去中心化、分布式的特征）。与此同时，对于在区块链上开展服务的人，可以往这个系统中的任意的节点进行读写操作，最后全世界所有节点会根据某种机制的完成一次又一次的同步，从而实现在区块链网络中所有节点的数据完全一致。 问题的由来 我们反复的提到区块链是一个去中心化的系统，确实，“去中心化”在区块链的世界里面是一个很重要的概念，很多模型（比如账本的维护、货币的发行、时间戳的设计、网络的维护、节点间的竞争等等）的设计都依赖于这个中心思想，那到底什么是去中心化呢？在解释真正去中心化之前，我们还是先简单了解一下什么是中心化吧 中心化 回忆一下你在网上购买一本书的流程： 1、第一步，你下单并把钱打给支付宝 2、第二步，支付宝收款后通知卖家可以发货了 3、第三步、卖家收到支付宝通知之后给你发货 4、第四步，你收到书之后，觉得满意，在支付宝上选择确认收货 5、第五步，支付宝收到通知后，把款项打给卖家。流程结束 你会发现，虽然你是在跟卖家做交易，但是，所有关键流程都是在跟支付宝打交道。这样的好处在于：万一哪个环节出问题，卖家和买家都可以通过支付宝寻求帮助，让支付宝做出仲裁。这就是一个最简单的基于中心化思维构建的交易模型，它的价值显著，就是建立权威，通过权威背书来获得多方的信任，同时依赖于权威放背后的资本和技术实力确保数据的可靠安全。 你一定会摆出一个巨大的问号脸？？？————“通过权威背书来获得多方的新人，同时以来权威方背后的资本和技术实力确保数据的可靠安全”，真的可以吗？？ 假如说，支付宝发生重大BUG，导致一段时间内的转账记录全部丢失，或者更彻底一点，支付宝的服务器被ISIS恐怖组织的一个导弹全部炸毁了。而我刚刚转出去的100元找谁说理去，这个时候，你就成了刀俎上的鱼肉；支付宝良心，会勉为其难承认你刚刚转账的事实，但他不承认你也没辙，因为确实连他也不知道这笔转账是否真实存在。 上述就是中心化最大的弊端————过分依赖中心和权威，也就意味着逐渐丧失自己的话语权。 去中心化 那么去中心化的形态是什么样子的呢？还是拿刚才那个例子继续，我们构建一个极简的去中心化的交易系统，看看我们是如何在网络上从不认识的卖家手里买到一本书的。 1、第一步，你下单并把钱打给卖家。 2、第二步，你将这条转账信息记录在自己的账本上 3、第三步，你将这条转账信息广播出去 4、第四步，卖家和支付宝在收到你的转账信息之后，在他们自己的账本上分别记录 5、第五步，卖家发货，同时将发货的事实记录在自己的账本 6、第六步，卖家把这条事实广播出去 7、第七步，你和支付宝收到这条事实记录，在自己的账本上分别记录 8、第八步，你收到书籍。至此，交易流程走完 刚才“人为刀俎我为鱼肉”的情况下在这个体系就比较难发生，因为所有人的账本上都有着完全一一致的交易记录，支付宝的账本服务器坏了，对不起，卖家的账本还存在，我的帐本还存在；这些都是这笔交易真实发生的铁证 当然，在这套极简的交易系统中，你已经发现了诸多漏洞和不理解，比如说三方当中有一个是坏人，他故意记录了对他更有利的转账信息怎么办；又比如说消息在传递的过程中被黑客篡改了怎么办等等。这在以往的计算机概论或者计算机网络书本上都有可能提及到————“类两军”和“拜占庭将军”问题。这里不在此赘述，你只需要知道，在我们的下面即将讲到的区块链系统中，通过巧妙的设计，足以解决上述存在的BUG 既然话以说到这份上，相信了解一点技术、特别是有运维背景的同学大概能够从极简交易系统中窥视到了更多区块链的一些影子———— 1、分布式存储，通过多地备份，制造数据冗余 2、让所有人都有能力去维护共同一份数据库 3、让所有人都有能力彼此监督维护数据库的行为 在我看来，你猜测的基本没错。其实这些就是区块链技术最核心的东西，外人看起来高大上、深不可测，但探究其根本发现就是这么简单和淳朴。当然，这里买呢肯定会有很多很多很多细枝末节的技术需要重构。 如果你差不多认同上面的观点，那我们应该基本上可以达成共识，分布式部署肯定是构建去中心化网络理所当然地解决方向————通过P2P网络协议将全世界所有节点计算机彼此相互连接，形成一张密密麻麻的网络；以巧妙的机制，通过节点之间的交易数据同步来保证全球计算机节点的数据共享和一致。 哈哈，说的轻巧，“交易数据这么重要的东西，在一个完全不信任的P2P网络节点中以一种错综复杂的方式传递，数据的一致性和安全性谁来保证，如果说互相监督，他们到底怎么做到？” 好了，不卖关子了，下面让我们围绕这个最最最最直接的问题开始进入到真正区块链的世界，抽丝剥茧看看它到底是如何一步步形成的，又是如何一步一步稳定运转。 从全球节点到交易数据 这张图制作的意义是帮助你在宏观上先快速理解区块链中所涉及到的相关名词以及他们的层级关系。同时，文章的知识结构和设计思路也大抵也会按照： 1、首先，将区块作为最小单位体，讲述极简区块链系统是如何运转的 2、接着，进入到区块更小单位体————交易记录，理解区块链是如何处理数据的 3、最后，将所有知识点糅合在一起，重回到区块和区块链，完整讲述整个工作流程 希望你在这个引导和结构下有一个比较好的阅读体验。Let’s go！ 区块，混沌世界的起源 既然已经达成共识，所以，我们事先构建好了一个去中心化的P2P网络；同时，为了让读者朋友们听起来更轻松，我先粗暴的规定在这个极简的区块链系统里，每十分钟有且仅产生一笔交易。 故事继续，在节点的视野里，大概每十分钟会凭空产生一个建立在自己平行宇宙世界的神奇区块（你可以将区块想象为一个盒子），这个区块里放着一些数字货币以及一张小纸条，小纸条上记录了这十分钟内产生的那唯一一笔交易信息，比如说——“小A转账给了小B100元”，当然，这段信息肯定是被加密处理过的，为的就是保证只有小A和小B（通过他们手上的钥匙）才有能力解读里面真正的内容 这个神奇的区块被创造出来之后，很快被埋在了地底下，至于埋在哪里？没有一个人知道，需要所有计算节点一起参与进来掘地三尺才有可能找到（找到一个有效的工作量证明）。显然，这是一件工作量巨大、成果随机的事件。但是呢，对于计算节点来说，一旦从地底下挖出这个区块，他将获得区块内价值不菲的数字货币，以及“小A转账给了小B100元”过程中小A所支付的小费。同时，对于这个节点来说，也只有他才有权力真正记录小纸条的内容，这是一份荣耀，而其他节点相当于只能使用它的复制品，一个已经没有数字货币加持的副本，当然这个神奇的区块还有一些其他很特别的地方，后面我们会在细细聊。 为了更好的描述，我们将计算机节点从地底下挖出区块的过程叫做“挖矿”，刚才说了，这是一件工作量巨大、运气成分较多、但收益丰厚的事儿。 过了一会儿，来自中国上海浦东新区张衡路上的一个节点突然跳出来很兴奋的说：“我挖到区块了！里面的小纸条都是有效的！奖励归我！”虽然此刻张衡路节点已经拿到了数字货币，但对于其他计算机节点来说，因为这里面还涉及到其他一些利益瓜葛，他们不会选择默认相信张衡路节点所说的话；基于陌生节点彼此不信任的原则，他们拿过张衡路节点所谓挖到的区块（副本），开始校验区块内的小纸条信息是否真实有效等等。在区块链世界里，节点们正是通过校验小纸条信息的准确性，或间接或直径二判断挖出的节点是否撒谎。（如何定义小纸条信息真实有效，后面会讲解，这里暂不做赘述） 在校验过程中，各个节点们会直接通过下面两个行为表达自己对张衡路节点的认同（准确无误）和态度： ·停止已经进行了一半甚至99%的挖矿进程 ·将张衡路节点成功挖出的区块（副本）追加到自己区块链的末尾 你可能稍微有点疑惑：停止可能已经执行了99%的挖矿行为，那之前99%的工作不久白做了吗？然后，区块链的末尾又是个什么鬼东西？ 对于第一个疑惑。我想说，你说的一点没错，但是没办法，现实就是这么残酷，即便工作已经做了99%，那也得放弃，这99%的工作劳苦几乎可以视为无用功，绝对的伤财劳众。第二个困惑，区块链和区块链的末尾是什么鬼？这里因为实现并没有讲清楚，但是你可以简单想象一下：区块是周期性不断的产生和不断的被挖出来，一个计算机节点可能事先已经执行了N次“从别人那手上-&gt;校验小纸条有效性”的流程，肯定在自己的节点上早已经存放了N个区块，这些区块会按照时间谁徐整齐的一字排列成为一个链状。没错，这个链条，就是你一直以为认为的那个区块链。如果你还是不能够理解，没关系，文章后面还会有很多次机会深入探究。 走进区块内，探索消息的本质 上面我们构建了一个最简单的区块链世界的模型，相信大多数同学都已经轻松掌握了。但是别骄傲，这还只是一些皮毛中的皮毛，坐好，下面我们准备开车了。 前面我们说到“大概每十分钟会凭空产生一个神奇的区块，这个区块里放了一张小纸条，上面记录了这十分钟内产生的这唯一一笔交易信息”。显然，十分钟内产生的交易肯定远不止一条，可能是上万条，这上万条数据在区块链世界是如何组织和处理的呢？另外，为什么在纸条上记录的只是某一次的交易信息，而不是某一个人的余额？余额好像跟符合我们现实世界的理解才对。 既然存在这样那样的疑问。现在我们就把视线暂时从“区块”、“区块链”这些看起来似乎较大实体的物质中移开，进入到区块内更微观的世界一探究竟，看看小纸条到底是怎么一回事，它的产生以及它终其一生的使命： 1、发起交易的时候，发起人会收到一张小纸条，他需要将交易记录比如说“盗盗转账给张三40元”写在纸上。说来也神奇，当写完的那一刹那，在小纸条的背面会自动将这段交易记录格式化成至少包含了“输入值”和“输出值”这两个重要字段；“输入值”用于记录数字货币的有效来源，“输出值”记录着数字货币发往的对象。" />
<meta property="og:description" content="首先，不要把区块链想的过于高深，它是一个分布在全球各地、能够协同运转的数据库存储系统，区别于传统数据库运作————读写权限掌握在一个公司或者一个集权手上（中心化的特征），区块链认为，任何有能力架设服务器的人都可以参与其中。来自于全球各地的掘金者在当地部署了自己的服务器，并连接到区块链网络中，成为这个分布式数据库存储系统中的一个节点；一旦加入，该节点享有铜其他所有节点完全一样的权利和义务（去中心化、分布式的特征）。与此同时，对于在区块链上开展服务的人，可以往这个系统中的任意的节点进行读写操作，最后全世界所有节点会根据某种机制的完成一次又一次的同步，从而实现在区块链网络中所有节点的数据完全一致。 问题的由来 我们反复的提到区块链是一个去中心化的系统，确实，“去中心化”在区块链的世界里面是一个很重要的概念，很多模型（比如账本的维护、货币的发行、时间戳的设计、网络的维护、节点间的竞争等等）的设计都依赖于这个中心思想，那到底什么是去中心化呢？在解释真正去中心化之前，我们还是先简单了解一下什么是中心化吧 中心化 回忆一下你在网上购买一本书的流程： 1、第一步，你下单并把钱打给支付宝 2、第二步，支付宝收款后通知卖家可以发货了 3、第三步、卖家收到支付宝通知之后给你发货 4、第四步，你收到书之后，觉得满意，在支付宝上选择确认收货 5、第五步，支付宝收到通知后，把款项打给卖家。流程结束 你会发现，虽然你是在跟卖家做交易，但是，所有关键流程都是在跟支付宝打交道。这样的好处在于：万一哪个环节出问题，卖家和买家都可以通过支付宝寻求帮助，让支付宝做出仲裁。这就是一个最简单的基于中心化思维构建的交易模型，它的价值显著，就是建立权威，通过权威背书来获得多方的信任，同时依赖于权威放背后的资本和技术实力确保数据的可靠安全。 你一定会摆出一个巨大的问号脸？？？————“通过权威背书来获得多方的新人，同时以来权威方背后的资本和技术实力确保数据的可靠安全”，真的可以吗？？ 假如说，支付宝发生重大BUG，导致一段时间内的转账记录全部丢失，或者更彻底一点，支付宝的服务器被ISIS恐怖组织的一个导弹全部炸毁了。而我刚刚转出去的100元找谁说理去，这个时候，你就成了刀俎上的鱼肉；支付宝良心，会勉为其难承认你刚刚转账的事实，但他不承认你也没辙，因为确实连他也不知道这笔转账是否真实存在。 上述就是中心化最大的弊端————过分依赖中心和权威，也就意味着逐渐丧失自己的话语权。 去中心化 那么去中心化的形态是什么样子的呢？还是拿刚才那个例子继续，我们构建一个极简的去中心化的交易系统，看看我们是如何在网络上从不认识的卖家手里买到一本书的。 1、第一步，你下单并把钱打给卖家。 2、第二步，你将这条转账信息记录在自己的账本上 3、第三步，你将这条转账信息广播出去 4、第四步，卖家和支付宝在收到你的转账信息之后，在他们自己的账本上分别记录 5、第五步，卖家发货，同时将发货的事实记录在自己的账本 6、第六步，卖家把这条事实广播出去 7、第七步，你和支付宝收到这条事实记录，在自己的账本上分别记录 8、第八步，你收到书籍。至此，交易流程走完 刚才“人为刀俎我为鱼肉”的情况下在这个体系就比较难发生，因为所有人的账本上都有着完全一一致的交易记录，支付宝的账本服务器坏了，对不起，卖家的账本还存在，我的帐本还存在；这些都是这笔交易真实发生的铁证 当然，在这套极简的交易系统中，你已经发现了诸多漏洞和不理解，比如说三方当中有一个是坏人，他故意记录了对他更有利的转账信息怎么办；又比如说消息在传递的过程中被黑客篡改了怎么办等等。这在以往的计算机概论或者计算机网络书本上都有可能提及到————“类两军”和“拜占庭将军”问题。这里不在此赘述，你只需要知道，在我们的下面即将讲到的区块链系统中，通过巧妙的设计，足以解决上述存在的BUG 既然话以说到这份上，相信了解一点技术、特别是有运维背景的同学大概能够从极简交易系统中窥视到了更多区块链的一些影子———— 1、分布式存储，通过多地备份，制造数据冗余 2、让所有人都有能力去维护共同一份数据库 3、让所有人都有能力彼此监督维护数据库的行为 在我看来，你猜测的基本没错。其实这些就是区块链技术最核心的东西，外人看起来高大上、深不可测，但探究其根本发现就是这么简单和淳朴。当然，这里买呢肯定会有很多很多很多细枝末节的技术需要重构。 如果你差不多认同上面的观点，那我们应该基本上可以达成共识，分布式部署肯定是构建去中心化网络理所当然地解决方向————通过P2P网络协议将全世界所有节点计算机彼此相互连接，形成一张密密麻麻的网络；以巧妙的机制，通过节点之间的交易数据同步来保证全球计算机节点的数据共享和一致。 哈哈，说的轻巧，“交易数据这么重要的东西，在一个完全不信任的P2P网络节点中以一种错综复杂的方式传递，数据的一致性和安全性谁来保证，如果说互相监督，他们到底怎么做到？” 好了，不卖关子了，下面让我们围绕这个最最最最直接的问题开始进入到真正区块链的世界，抽丝剥茧看看它到底是如何一步步形成的，又是如何一步一步稳定运转。 从全球节点到交易数据 这张图制作的意义是帮助你在宏观上先快速理解区块链中所涉及到的相关名词以及他们的层级关系。同时，文章的知识结构和设计思路也大抵也会按照： 1、首先，将区块作为最小单位体，讲述极简区块链系统是如何运转的 2、接着，进入到区块更小单位体————交易记录，理解区块链是如何处理数据的 3、最后，将所有知识点糅合在一起，重回到区块和区块链，完整讲述整个工作流程 希望你在这个引导和结构下有一个比较好的阅读体验。Let’s go！ 区块，混沌世界的起源 既然已经达成共识，所以，我们事先构建好了一个去中心化的P2P网络；同时，为了让读者朋友们听起来更轻松，我先粗暴的规定在这个极简的区块链系统里，每十分钟有且仅产生一笔交易。 故事继续，在节点的视野里，大概每十分钟会凭空产生一个建立在自己平行宇宙世界的神奇区块（你可以将区块想象为一个盒子），这个区块里放着一些数字货币以及一张小纸条，小纸条上记录了这十分钟内产生的那唯一一笔交易信息，比如说——“小A转账给了小B100元”，当然，这段信息肯定是被加密处理过的，为的就是保证只有小A和小B（通过他们手上的钥匙）才有能力解读里面真正的内容 这个神奇的区块被创造出来之后，很快被埋在了地底下，至于埋在哪里？没有一个人知道，需要所有计算节点一起参与进来掘地三尺才有可能找到（找到一个有效的工作量证明）。显然，这是一件工作量巨大、成果随机的事件。但是呢，对于计算节点来说，一旦从地底下挖出这个区块，他将获得区块内价值不菲的数字货币，以及“小A转账给了小B100元”过程中小A所支付的小费。同时，对于这个节点来说，也只有他才有权力真正记录小纸条的内容，这是一份荣耀，而其他节点相当于只能使用它的复制品，一个已经没有数字货币加持的副本，当然这个神奇的区块还有一些其他很特别的地方，后面我们会在细细聊。 为了更好的描述，我们将计算机节点从地底下挖出区块的过程叫做“挖矿”，刚才说了，这是一件工作量巨大、运气成分较多、但收益丰厚的事儿。 过了一会儿，来自中国上海浦东新区张衡路上的一个节点突然跳出来很兴奋的说：“我挖到区块了！里面的小纸条都是有效的！奖励归我！”虽然此刻张衡路节点已经拿到了数字货币，但对于其他计算机节点来说，因为这里面还涉及到其他一些利益瓜葛，他们不会选择默认相信张衡路节点所说的话；基于陌生节点彼此不信任的原则，他们拿过张衡路节点所谓挖到的区块（副本），开始校验区块内的小纸条信息是否真实有效等等。在区块链世界里，节点们正是通过校验小纸条信息的准确性，或间接或直径二判断挖出的节点是否撒谎。（如何定义小纸条信息真实有效，后面会讲解，这里暂不做赘述） 在校验过程中，各个节点们会直接通过下面两个行为表达自己对张衡路节点的认同（准确无误）和态度： ·停止已经进行了一半甚至99%的挖矿进程 ·将张衡路节点成功挖出的区块（副本）追加到自己区块链的末尾 你可能稍微有点疑惑：停止可能已经执行了99%的挖矿行为，那之前99%的工作不久白做了吗？然后，区块链的末尾又是个什么鬼东西？ 对于第一个疑惑。我想说，你说的一点没错，但是没办法，现实就是这么残酷，即便工作已经做了99%，那也得放弃，这99%的工作劳苦几乎可以视为无用功，绝对的伤财劳众。第二个困惑，区块链和区块链的末尾是什么鬼？这里因为实现并没有讲清楚，但是你可以简单想象一下：区块是周期性不断的产生和不断的被挖出来，一个计算机节点可能事先已经执行了N次“从别人那手上-&gt;校验小纸条有效性”的流程，肯定在自己的节点上早已经存放了N个区块，这些区块会按照时间谁徐整齐的一字排列成为一个链状。没错，这个链条，就是你一直以为认为的那个区块链。如果你还是不能够理解，没关系，文章后面还会有很多次机会深入探究。 走进区块内，探索消息的本质 上面我们构建了一个最简单的区块链世界的模型，相信大多数同学都已经轻松掌握了。但是别骄傲，这还只是一些皮毛中的皮毛，坐好，下面我们准备开车了。 前面我们说到“大概每十分钟会凭空产生一个神奇的区块，这个区块里放了一张小纸条，上面记录了这十分钟内产生的这唯一一笔交易信息”。显然，十分钟内产生的交易肯定远不止一条，可能是上万条，这上万条数据在区块链世界是如何组织和处理的呢？另外，为什么在纸条上记录的只是某一次的交易信息，而不是某一个人的余额？余额好像跟符合我们现实世界的理解才对。 既然存在这样那样的疑问。现在我们就把视线暂时从“区块”、“区块链”这些看起来似乎较大实体的物质中移开，进入到区块内更微观的世界一探究竟，看看小纸条到底是怎么一回事，它的产生以及它终其一生的使命： 1、发起交易的时候，发起人会收到一张小纸条，他需要将交易记录比如说“盗盗转账给张三40元”写在纸上。说来也神奇，当写完的那一刹那，在小纸条的背面会自动将这段交易记录格式化成至少包含了“输入值”和“输出值”这两个重要字段；“输入值”用于记录数字货币的有效来源，“输出值”记录着数字货币发往的对象。" />
<link rel="canonical" href="http://0.0.0.0:4000/2018/06/01/%E5%A6%82%E4%BD%95%E7%AE%80%E5%8D%95%E6%98%93%E6%87%82%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%8C%BA%E5%9D%97%E9%93%BE.html" />
<meta property="og:url" content="http://0.0.0.0:4000/2018/06/01/%E5%A6%82%E4%BD%95%E7%AE%80%E5%8D%95%E6%98%93%E6%87%82%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%8C%BA%E5%9D%97%E9%93%BE.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-01T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"首先，不要把区块链想的过于高深，它是一个分布在全球各地、能够协同运转的数据库存储系统，区别于传统数据库运作————读写权限掌握在一个公司或者一个集权手上（中心化的特征），区块链认为，任何有能力架设服务器的人都可以参与其中。来自于全球各地的掘金者在当地部署了自己的服务器，并连接到区块链网络中，成为这个分布式数据库存储系统中的一个节点；一旦加入，该节点享有铜其他所有节点完全一样的权利和义务（去中心化、分布式的特征）。与此同时，对于在区块链上开展服务的人，可以往这个系统中的任意的节点进行读写操作，最后全世界所有节点会根据某种机制的完成一次又一次的同步，从而实现在区块链网络中所有节点的数据完全一致。 问题的由来 我们反复的提到区块链是一个去中心化的系统，确实，“去中心化”在区块链的世界里面是一个很重要的概念，很多模型（比如账本的维护、货币的发行、时间戳的设计、网络的维护、节点间的竞争等等）的设计都依赖于这个中心思想，那到底什么是去中心化呢？在解释真正去中心化之前，我们还是先简单了解一下什么是中心化吧 中心化 回忆一下你在网上购买一本书的流程： 1、第一步，你下单并把钱打给支付宝 2、第二步，支付宝收款后通知卖家可以发货了 3、第三步、卖家收到支付宝通知之后给你发货 4、第四步，你收到书之后，觉得满意，在支付宝上选择确认收货 5、第五步，支付宝收到通知后，把款项打给卖家。流程结束 你会发现，虽然你是在跟卖家做交易，但是，所有关键流程都是在跟支付宝打交道。这样的好处在于：万一哪个环节出问题，卖家和买家都可以通过支付宝寻求帮助，让支付宝做出仲裁。这就是一个最简单的基于中心化思维构建的交易模型，它的价值显著，就是建立权威，通过权威背书来获得多方的信任，同时依赖于权威放背后的资本和技术实力确保数据的可靠安全。 你一定会摆出一个巨大的问号脸？？？————“通过权威背书来获得多方的新人，同时以来权威方背后的资本和技术实力确保数据的可靠安全”，真的可以吗？？ 假如说，支付宝发生重大BUG，导致一段时间内的转账记录全部丢失，或者更彻底一点，支付宝的服务器被ISIS恐怖组织的一个导弹全部炸毁了。而我刚刚转出去的100元找谁说理去，这个时候，你就成了刀俎上的鱼肉；支付宝良心，会勉为其难承认你刚刚转账的事实，但他不承认你也没辙，因为确实连他也不知道这笔转账是否真实存在。 上述就是中心化最大的弊端————过分依赖中心和权威，也就意味着逐渐丧失自己的话语权。 去中心化 那么去中心化的形态是什么样子的呢？还是拿刚才那个例子继续，我们构建一个极简的去中心化的交易系统，看看我们是如何在网络上从不认识的卖家手里买到一本书的。 1、第一步，你下单并把钱打给卖家。 2、第二步，你将这条转账信息记录在自己的账本上 3、第三步，你将这条转账信息广播出去 4、第四步，卖家和支付宝在收到你的转账信息之后，在他们自己的账本上分别记录 5、第五步，卖家发货，同时将发货的事实记录在自己的账本 6、第六步，卖家把这条事实广播出去 7、第七步，你和支付宝收到这条事实记录，在自己的账本上分别记录 8、第八步，你收到书籍。至此，交易流程走完 刚才“人为刀俎我为鱼肉”的情况下在这个体系就比较难发生，因为所有人的账本上都有着完全一一致的交易记录，支付宝的账本服务器坏了，对不起，卖家的账本还存在，我的帐本还存在；这些都是这笔交易真实发生的铁证 当然，在这套极简的交易系统中，你已经发现了诸多漏洞和不理解，比如说三方当中有一个是坏人，他故意记录了对他更有利的转账信息怎么办；又比如说消息在传递的过程中被黑客篡改了怎么办等等。这在以往的计算机概论或者计算机网络书本上都有可能提及到————“类两军”和“拜占庭将军”问题。这里不在此赘述，你只需要知道，在我们的下面即将讲到的区块链系统中，通过巧妙的设计，足以解决上述存在的BUG 既然话以说到这份上，相信了解一点技术、特别是有运维背景的同学大概能够从极简交易系统中窥视到了更多区块链的一些影子———— 1、分布式存储，通过多地备份，制造数据冗余 2、让所有人都有能力去维护共同一份数据库 3、让所有人都有能力彼此监督维护数据库的行为 在我看来，你猜测的基本没错。其实这些就是区块链技术最核心的东西，外人看起来高大上、深不可测，但探究其根本发现就是这么简单和淳朴。当然，这里买呢肯定会有很多很多很多细枝末节的技术需要重构。 如果你差不多认同上面的观点，那我们应该基本上可以达成共识，分布式部署肯定是构建去中心化网络理所当然地解决方向————通过P2P网络协议将全世界所有节点计算机彼此相互连接，形成一张密密麻麻的网络；以巧妙的机制，通过节点之间的交易数据同步来保证全球计算机节点的数据共享和一致。 哈哈，说的轻巧，“交易数据这么重要的东西，在一个完全不信任的P2P网络节点中以一种错综复杂的方式传递，数据的一致性和安全性谁来保证，如果说互相监督，他们到底怎么做到？” 好了，不卖关子了，下面让我们围绕这个最最最最直接的问题开始进入到真正区块链的世界，抽丝剥茧看看它到底是如何一步步形成的，又是如何一步一步稳定运转。 从全球节点到交易数据 这张图制作的意义是帮助你在宏观上先快速理解区块链中所涉及到的相关名词以及他们的层级关系。同时，文章的知识结构和设计思路也大抵也会按照： 1、首先，将区块作为最小单位体，讲述极简区块链系统是如何运转的 2、接着，进入到区块更小单位体————交易记录，理解区块链是如何处理数据的 3、最后，将所有知识点糅合在一起，重回到区块和区块链，完整讲述整个工作流程 希望你在这个引导和结构下有一个比较好的阅读体验。Let’s go！ 区块，混沌世界的起源 既然已经达成共识，所以，我们事先构建好了一个去中心化的P2P网络；同时，为了让读者朋友们听起来更轻松，我先粗暴的规定在这个极简的区块链系统里，每十分钟有且仅产生一笔交易。 故事继续，在节点的视野里，大概每十分钟会凭空产生一个建立在自己平行宇宙世界的神奇区块（你可以将区块想象为一个盒子），这个区块里放着一些数字货币以及一张小纸条，小纸条上记录了这十分钟内产生的那唯一一笔交易信息，比如说——“小A转账给了小B100元”，当然，这段信息肯定是被加密处理过的，为的就是保证只有小A和小B（通过他们手上的钥匙）才有能力解读里面真正的内容 这个神奇的区块被创造出来之后，很快被埋在了地底下，至于埋在哪里？没有一个人知道，需要所有计算节点一起参与进来掘地三尺才有可能找到（找到一个有效的工作量证明）。显然，这是一件工作量巨大、成果随机的事件。但是呢，对于计算节点来说，一旦从地底下挖出这个区块，他将获得区块内价值不菲的数字货币，以及“小A转账给了小B100元”过程中小A所支付的小费。同时，对于这个节点来说，也只有他才有权力真正记录小纸条的内容，这是一份荣耀，而其他节点相当于只能使用它的复制品，一个已经没有数字货币加持的副本，当然这个神奇的区块还有一些其他很特别的地方，后面我们会在细细聊。 为了更好的描述，我们将计算机节点从地底下挖出区块的过程叫做“挖矿”，刚才说了，这是一件工作量巨大、运气成分较多、但收益丰厚的事儿。 过了一会儿，来自中国上海浦东新区张衡路上的一个节点突然跳出来很兴奋的说：“我挖到区块了！里面的小纸条都是有效的！奖励归我！”虽然此刻张衡路节点已经拿到了数字货币，但对于其他计算机节点来说，因为这里面还涉及到其他一些利益瓜葛，他们不会选择默认相信张衡路节点所说的话；基于陌生节点彼此不信任的原则，他们拿过张衡路节点所谓挖到的区块（副本），开始校验区块内的小纸条信息是否真实有效等等。在区块链世界里，节点们正是通过校验小纸条信息的准确性，或间接或直径二判断挖出的节点是否撒谎。（如何定义小纸条信息真实有效，后面会讲解，这里暂不做赘述） 在校验过程中，各个节点们会直接通过下面两个行为表达自己对张衡路节点的认同（准确无误）和态度： ·停止已经进行了一半甚至99%的挖矿进程 ·将张衡路节点成功挖出的区块（副本）追加到自己区块链的末尾 你可能稍微有点疑惑：停止可能已经执行了99%的挖矿行为，那之前99%的工作不久白做了吗？然后，区块链的末尾又是个什么鬼东西？ 对于第一个疑惑。我想说，你说的一点没错，但是没办法，现实就是这么残酷，即便工作已经做了99%，那也得放弃，这99%的工作劳苦几乎可以视为无用功，绝对的伤财劳众。第二个困惑，区块链和区块链的末尾是什么鬼？这里因为实现并没有讲清楚，但是你可以简单想象一下：区块是周期性不断的产生和不断的被挖出来，一个计算机节点可能事先已经执行了N次“从别人那手上-&gt;校验小纸条有效性”的流程，肯定在自己的节点上早已经存放了N个区块，这些区块会按照时间谁徐整齐的一字排列成为一个链状。没错，这个链条，就是你一直以为认为的那个区块链。如果你还是不能够理解，没关系，文章后面还会有很多次机会深入探究。 走进区块内，探索消息的本质 上面我们构建了一个最简单的区块链世界的模型，相信大多数同学都已经轻松掌握了。但是别骄傲，这还只是一些皮毛中的皮毛，坐好，下面我们准备开车了。 前面我们说到“大概每十分钟会凭空产生一个神奇的区块，这个区块里放了一张小纸条，上面记录了这十分钟内产生的这唯一一笔交易信息”。显然，十分钟内产生的交易肯定远不止一条，可能是上万条，这上万条数据在区块链世界是如何组织和处理的呢？另外，为什么在纸条上记录的只是某一次的交易信息，而不是某一个人的余额？余额好像跟符合我们现实世界的理解才对。 既然存在这样那样的疑问。现在我们就把视线暂时从“区块”、“区块链”这些看起来似乎较大实体的物质中移开，进入到区块内更微观的世界一探究竟，看看小纸条到底是怎么一回事，它的产生以及它终其一生的使命： 1、发起交易的时候，发起人会收到一张小纸条，他需要将交易记录比如说“盗盗转账给张三40元”写在纸上。说来也神奇，当写完的那一刹那，在小纸条的背面会自动将这段交易记录格式化成至少包含了“输入值”和“输出值”这两个重要字段；“输入值”用于记录数字货币的有效来源，“输出值”记录着数字货币发往的对象。","@type":"BlogPosting","url":"http://0.0.0.0:4000/2018/06/01/%E5%A6%82%E4%BD%95%E7%AE%80%E5%8D%95%E6%98%93%E6%87%82%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%8C%BA%E5%9D%97%E9%93%BE.html","headline":"如何简单易懂的介绍区块链","dateModified":"2018-06-01T00:00:00+08:00","datePublished":"2018-06-01T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/2018/06/01/%E5%A6%82%E4%BD%95%E7%AE%80%E5%8D%95%E6%98%93%E6%87%82%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%8C%BA%E5%9D%97%E9%93%BE.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>

  </head>
  <body>
    <div class="wrapper">
      <header  class="without-description" >
        <h1>如何简单易懂的介绍区块链</h1>
        
        
        <ul>
            <li><a href="https://blog.uzzz.org/" target="_blank"><strong>柚子社区<br/>(国际版)</strong></a></li>
            <li><a href="https://blog.uzzz.org.cn/" target="_blank"><strong>柚子社区<br/>(国内版)</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

      <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p>首先，不要把区块链想的过于高深，它是一个分布在全球各地、能够协同运转的数据库存储系统，区别于传统数据库运作————读写权限掌握在一个公司或者一个集权手上（中心化的特征），区块链认为，任何有能力架设服务器的人都可以参与其中。来自于全球各地的掘金者在当地部署了自己的服务器，并连接到区块链网络中，成为这个分布式数据库存储系统中的一个节点；一旦加入，该节点享有铜其他所有节点完全一样的权利和义务（去中心化、分布式的特征）。与此同时，对于在区块链上开展服务的人，可以往这个系统中的任意的节点进行读写操作，最后全世界所有节点会根据某种机制的完成一次又一次的同步，从而实现在区块链网络中所有节点的数据完全一致。</p> 
  <p><img src="https://img-blog.csdn.net/20180527233844687?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="上图中，高亮的点就是区块链系统分布在全球各地的一个个节点，而这些节点可以简单的理解为一台服务器集群" title=""></p> 
  <h2 id="问题的由来">问题的由来</h2> 
  <p>我们反复的提到区块链是一个去中心化的系统，确实，“去中心化”在区块链的世界里面是一个很重要的概念，很多模型（比如账本的维护、货币的发行、时间戳的设计、网络的维护、节点间的竞争等等）的设计都依赖于这个中心思想，那到底什么是去中心化呢？在解释真正去中心化之前，我们还是先简单了解一下什么是中心化吧</p> 
  <h2 id="中心化">中心化</h2> 
  <p>回忆一下你在网上购买一本书的流程：</p> 
  <pre><code>1、第一步，你下单并把钱打给支付宝
2、第二步，支付宝收款后通知卖家可以发货了
3、第三步、卖家收到支付宝通知之后给你发货
4、第四步，你收到书之后，觉得满意，在支付宝上选择确认收货
5、第五步，支付宝收到通知后，把款项打给卖家。流程结束
</code></pre> 
  <p>你会发现，虽然你是在跟卖家做交易，但是，所有关键流程都是在跟支付宝打交道。这样的好处在于：万一哪个环节出问题，卖家和买家都可以通过支付宝寻求帮助，让支付宝做出仲裁。这就是一个最简单的基于中心化思维构建的交易模型，它的价值显著，就是建立权威，通过权威背书来获得多方的信任，同时依赖于权威放背后的资本和技术实力确保数据的可靠安全。</p> 
  <p>你一定会摆出一个巨大的问号脸？？？————“通过权威背书来获得多方的新人，同时以来权威方背后的资本和技术实力确保数据的可靠安全”，真的可以吗？？</p> 
  <p>假如说，支付宝发生重大BUG，导致一段时间内的转账记录全部丢失，或者更彻底一点，支付宝的服务器被ISIS恐怖组织的一个导弹全部炸毁了。而我刚刚转出去的100元找谁说理去，这个时候，你就成了刀俎上的鱼肉；支付宝良心，会勉为其难承认你刚刚转账的事实，但他不承认你也没辙，因为确实连他也不知道这笔转账是否真实存在。</p> 
  <p>上述就是中心化最大的弊端————过分依赖中心和权威，也就意味着逐渐丧失自己的话语权。</p> 
  <h2 id="去中心化">去中心化</h2> 
  <p>那么去中心化的形态是什么样子的呢？还是拿刚才那个例子继续，我们构建一个极简的去中心化的交易系统，看看我们是如何在网络上从不认识的卖家手里买到一本书的。</p> 
  <pre><code>1、第一步，你下单并把钱打给卖家。
2、第二步，你将这条转账信息记录在自己的账本上
3、第三步，你将这条转账信息广播出去
4、第四步，卖家和支付宝在收到你的转账信息之后，在他们自己的账本上分别记录
5、第五步，卖家发货，同时将发货的事实记录在自己的账本
6、第六步，卖家把这条事实广播出去
7、第七步，你和支付宝收到这条事实记录，在自己的账本上分别记录
8、第八步，你收到书籍。至此，交易流程走完
</code></pre> 
  <p>刚才“人为刀俎我为鱼肉”的情况下在这个体系就比较难发生，因为所有人的账本上都有着完全一一致的交易记录，支付宝的账本服务器坏了，对不起，卖家的账本还存在，我的帐本还存在；这些都是这笔交易真实发生的铁证</p> 
  <p>当然，在这套极简的交易系统中，你已经发现了诸多漏洞和不理解，比如说三方当中有一个是坏人，他故意记录了对他更有利的转账信息怎么办；又比如说消息在传递的过程中被黑客篡改了怎么办等等。这在以往的计算机概论或者计算机网络书本上都有可能提及到————“类两军”和“拜占庭将军”问题。这里不在此赘述，你只需要知道，在我们的下面即将讲到的区块链系统中，通过巧妙的设计，足以解决上述存在的BUG</p> 
  <p>既然话以说到这份上，相信了解一点技术、特别是有运维背景的同学大概能够从极简交易系统中窥视到了更多区块链的一些影子————</p> 
  <pre><code>1、分布式存储，通过多地备份，制造数据冗余
2、让所有人都有能力去维护共同一份数据库
3、让所有人都有能力彼此监督维护数据库的行为
</code></pre> 
  <p>在我看来，你猜测的基本没错。其实这些就是区块链技术最核心的东西，外人看起来高大上、深不可测，但探究其根本发现就是这么简单和淳朴。当然，这里买呢肯定会有很多很多很多细枝末节的技术需要重构。</p> 
  <p>如果你差不多认同上面的观点，那我们应该基本上可以达成共识，分布式部署肯定是构建去中心化网络理所当然地解决方向————通过P2P网络协议将全世界所有节点计算机彼此相互连接，形成一张密密麻麻的网络；以巧妙的机制，通过节点之间的交易数据同步来保证全球计算机节点的数据共享和一致。</p> 
  <p>哈哈，说的轻巧，“交易数据这么重要的东西，在一个完全不信任的P2P网络节点中以一种错综复杂的方式传递，数据的一致性和安全性谁来保证，如果说互相监督，他们到底怎么做到？”</p> 
  <p>好了，不卖关子了，下面让我们围绕这个最最最最直接的问题开始进入到真正区块链的世界，抽丝剥茧看看它到底是如何一步步形成的，又是如何一步一步稳定运转。</p> 
  <h2 id="从全球节点到交易数据">从全球节点到交易数据</h2> 
  <p><img src="https://img-blog.csdn.net/20180528000823534?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p> 
  <p>这张图制作的意义是帮助你在宏观上先快速理解区块链中所涉及到的相关名词以及他们的层级关系。同时，文章的知识结构和设计思路也大抵也会按照：</p> 
  <pre><code>1、首先，将区块作为最小单位体，讲述极简区块链系统是如何运转的
2、接着，进入到区块更小单位体————交易记录，理解区块链是如何处理数据的
3、最后，将所有知识点糅合在一起，重回到区块和区块链，完整讲述整个工作流程
</code></pre> 
  <p>希望你在这个引导和结构下有一个比较好的阅读体验。Let’s go！</p> 
  <h2 id="区块混沌世界的起源">区块，混沌世界的起源</h2> 
  <p>既然已经达成共识，所以，我们事先构建好了一个去中心化的P2P网络；同时，为了让读者朋友们听起来更轻松，我先粗暴的规定在这个极简的区块链系统里，每十分钟有且仅产生一笔交易。</p> 
  <p>故事继续，在节点的视野里，大概每十分钟会凭空产生一个建立在自己平行宇宙世界的神奇区块（你可以将区块想象为一个盒子），这个区块里放着一些数字货币以及一张小纸条，小纸条上记录了这十分钟内产生的那唯一一笔交易信息，比如说——“小A转账给了小B100元”，当然，这段信息肯定是被加密处理过的，为的就是保证只有小A和小B（通过他们手上的钥匙）才有能力解读里面真正的内容</p> 
  <p>这个神奇的区块被创造出来之后，很快被埋在了地底下，至于埋在哪里？没有一个人知道，需要所有计算节点一起参与进来掘地三尺才有可能找到（找到一个有效的工作量证明）。显然，这是一件工作量巨大、成果随机的事件。但是呢，对于计算节点来说，一旦从地底下挖出这个区块，他将获得区块内价值不菲的数字货币，以及“小A转账给了小B100元”过程中小A所支付的小费。同时，对于这个节点来说，也只有他才有权力真正记录小纸条的内容，这是一份荣耀，而其他节点相当于只能使用它的复制品，一个已经没有数字货币加持的副本，当然这个神奇的区块还有一些其他很特别的地方，后面我们会在细细聊。</p> 
  <p>为了更好的描述，我们将计算机节点从地底下挖出区块的过程叫做“挖矿”，刚才说了，这是一件工作量巨大、运气成分较多、但收益丰厚的事儿。</p> 
  <p>过了一会儿，来自中国上海浦东新区张衡路上的一个节点突然跳出来很兴奋的说：“我挖到区块了！里面的小纸条都是有效的！奖励归我！”虽然此刻张衡路节点已经拿到了数字货币，但对于其他计算机节点来说，因为这里面还涉及到其他一些利益瓜葛，他们不会选择默认相信张衡路节点所说的话；基于陌生节点彼此不信任的原则，他们拿过张衡路节点所谓挖到的区块（副本），开始校验区块内的小纸条信息是否真实有效等等。在区块链世界里，节点们正是通过校验小纸条信息的准确性，或间接或直径二判断挖出的节点是否撒谎。（如何定义小纸条信息真实有效，后面会讲解，这里暂不做赘述）</p> 
  <p>在校验过程中，各个节点们会直接通过下面两个行为表达自己对张衡路节点的认同（准确无误）和态度：</p> 
  <pre><code>·停止已经进行了一半甚至99%的挖矿进程
·将张衡路节点成功挖出的区块（副本）追加到自己区块链的末尾
</code></pre> 
  <p>你可能稍微有点疑惑：停止可能已经执行了99%的挖矿行为，那之前99%的工作不久白做了吗？然后，区块链的末尾又是个什么鬼东西？</p> 
  <p>对于第一个疑惑。我想说，你说的一点没错，但是没办法，现实就是这么残酷，即便工作已经做了99%，那也得放弃，这99%的工作劳苦几乎可以视为无用功，绝对的伤财劳众。第二个困惑，区块链和区块链的末尾是什么鬼？这里因为实现并没有讲清楚，但是你可以简单想象一下：区块是周期性不断的产生和不断的被挖出来，一个计算机节点可能事先已经执行了N次“从别人那手上-&gt;校验小纸条有效性”的流程，肯定在自己的节点上早已经存放了N个区块，这些区块会按照时间谁徐整齐的一字排列成为一个链状。没错，这个链条，就是你一直以为认为的那个区块链。如果你还是不能够理解，没关系，文章后面还会有很多次机会深入探究。</p> 
  <h2 id="走进区块内探索消息的本质">走进区块内，探索消息的本质</h2> 
  <p>上面我们构建了一个最简单的区块链世界的模型，相信大多数同学都已经轻松掌握了。但是别骄傲，这还只是一些皮毛中的皮毛，坐好，下面我们准备开车了。</p> 
  <p>前面我们说到“大概每十分钟会凭空产生一个神奇的区块，这个区块里放了一张小纸条，上面记录了这十分钟内产生的这唯一一笔交易信息”。显然，十分钟内产生的交易肯定远不止一条，可能是上万条，这上万条数据在区块链世界是如何组织和处理的呢？另外，为什么在纸条上记录的只是某一次的交易信息，而不是某一个人的余额？余额好像跟符合我们现实世界的理解才对。</p> 
  <p>既然存在这样那样的疑问。现在我们就把视线暂时从“区块”、“区块链”这些看起来似乎较大实体的物质中移开，进入到区块内更微观的世界一探究竟，看看小纸条到底是怎么一回事，它的产生以及它终其一生的使命：</p> 
  <pre><code>1、发起交易的时候，发起人会收到一张小纸条，他需要将交易记录比如说“盗盗转账给张三40元”写在纸上。说来也神奇，当写完的那一刹那，在小纸条的背面会自动将这段交易记录格式化成至少包含了“输入值”和“输出值”这两个重要字段；“输入值”用于记录数字货币的有效来源，“输出值”记录着数字货币发往的对象。

2、刚刚创建的小纸条立马会被标记成为“**未确认**”的小纸条。从地下成功挖出区块并最终连接到区块链里的这个小纸条一开始会被标记为“**有效**”。若这条有效的小纸条作为其他交易的输入值被使用，那么，这个有效的小纸条很快会被标记为“**无效**”。因为各种原因，区块从链上断开、丢弃，曾经这个区块内被标记为“有效”的小纸条会被重新标记为“**未确认**”。

3、区块链里面没有账户余额的概念，你真正拥有的数字资产实际上是一段交易信息；通过简单的加减运算获知你数字钱包里的余额。
</code></pre> 
  <p>上面的1、2、3仅仅作为结论一开始强行灌输给你的知识点，其中有几个描述可能会有点绕，让你觉得云里雾里，没有关系，因为我们立刻、马上就开始说细说里面的细枝末节。</p> 
  <p><img src="https://img-blog.csdn.net/20180530005950354?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="上图，是区块内，盗盗在小纸条上记录下的交易信息，后被格式化的呈现" title=""></p> 
  <p>上图就是从无数打包进区块内的小纸条中，抽取出来的一张，以及它最终被格式化后的缩影。单看右侧的图可能很容易产生误会，虽然看起来有多行，但实际上就是“盗盗转账给张三40个比特币”这一条交易数据另外的一种呈现形态。因为区块链世界里面这么规定，每一条交易记录，必须有能力追溯到交易发起者 发起这笔交易、其中所涉及金额的上一笔全部交易信息，即这笔钱从何而来的问题。这其实很容易理解，在去中心化的网络中，通过建立交易链，和通过交易链上的可溯源性间接保证数据安全和有效。</p> 
  <p>我们继续看，在区块链世界里，我们是如何仅通过“盗盗转账给张三40个比特币”这条交易信息完成转账流程的。其实跟现实中你在路边买一个包子的流程大抵上相同。</p> 
  <p><strong>第一步：判断是否有足够的余额完成交易</strong></p> 
  <p>这里我们再一次重申，在比特币的区块链世界里是没有余额的概念（以太坊的底层区块链有余额概念），余额是通过简单数字的加减最终获得，你拥有所谓的数字货币实际上是因为你拥有一条交易记录，即“盗盗转账给张三40个比特币”！这里，我们还是拿这条记录说事：</p> 
  <p>追溯“输出值”是“盗盗”相关的<strong>全部有效交易记录</strong>作为，对有效交易中的数字进行简单求和，判断是否大于等于40，如果确实大于等于，则将这些有效的交易记录合成一条新的交易记录（如下图）。如果小于40，其实可以不需要再继续往下探讨。</p> 
  <p><img src="https://img-blog.csdn.net/2018053001125690?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p> 
  <p>就上图的例子，我们追溯到曾经转账给盗盗的<strong>有效交易记录</strong>有“小A转账给盗盗10btc”、“小B转账给盗盗20btc”、“小C转账给盗盗25btc”，我们需要将这三条交易记录合并成一条更复杂描述的交易记录，即“（小A转账给盗盗10btc + 小B转账给盗盗20btc + 小C转账给盗盗25btc）转账给张三40btc”。</p> 
  <p><strong>第二步：判断是否需要找零</strong></p> 
  <p>对以追溯到的有效交易数字求和，如果发现大于需要支付的金额，需要将多出的数字重新支付给自己，相当于找零。对应生成了一条全新的交易记录（如下图）</p> 
  <p>就上图的例子来说，我们最后合并成的交易记录“（小A转账给盗盗10btc + 小B转账给盗盗20btc + 小C转账给盗盗25btc + 盗盗转账给盗盗15btc）转账给张三40btc” 事实上等同于“盗盗转账给张三40btc”。其中，“盗盗转账给盗盗15btc”就可以理解为找零。</p> 
  <p><strong>第三步：发出去，让全球节点认同和备份小纸条</strong></p> 
  <p>找条内部重新处理过的复杂交易记录被塞进区块，埋在地下，等待节点挖出来，一旦区块被挖矿成功，并且该区块最终连在了区块链的主链上。张三将最终拥有了这条交易记录，而先前的“小A转账给盗盗10btc”、“小B转账给盗盗20btc”、“小C转账给盗盗20btc”、“小C转账给盗盗25btc”都将被视为已经使用过的交易记录————从此被贴上“无效”的标签，意味着这些交易记录将永远不会再被追溯到。</p> 
  <p>我们最后再一次重申，只是希望让你加深印象：<strong>拥有数字货币 = 拥有交易记录</strong></p> 
  <p><strong>通过设计巧妙的精巧密码学保证数据安全</strong></p> 
  <p>记录着交易信息的小纸条借助区块这个载体，在分布式网络中以不同的轨迹错纵复杂的传递，我们前面说了，你真正拥有的数字资产实际上是一段交易信息，而不是你常规意义上理解的货币。所以这个过程就需要重点解决两个问题：</p> 
  <pre><code>·接收到的这条交易记录在传输过程中没有被其他人所篡改
·接收到的这条交易记录确实是由发起交易的人所创造
</code></pre> 
  <p>在这里，我们需要事先引入两个知识点，可能稍微有带你难消化，但都是计算机领域较为成熟的和基础的概念。</p> 
  <p>第一个知识点：SHA256()函数。你只需要知道，任意长度的字符串、甚至文件体本身经过SHA256函数工厂的加工，都会输出一个固定长度的字符串；同时，输入的字符串或者文件稍微做一丢丢的改动，SHA256()函数给出的输出结果都将发生翻天覆地的改变。注意，SHA256()函数是公开的，任何人都可以使用。</p> 
  <p><img src="https://img-blog.csdn.net/20180530013145413?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="上图，仅仅一个小数点的改变，输出的结果已经翻天覆地" title=""></p> 
  <p>第二个知识点：非对称加密。你也只需要了解，任何人手里都有两把钥匙，其中一把只有自己知道，叫做“私钥”，以及一把可以公布于众，叫做“公钥”；通过私钥加密的信息，必须通过公钥才能解密，连自己的私钥也无解。公钥可以通过私钥生成多把。</p> 
  <p>有了这些知识点的加持，上面两个问题开始变得有解。下面我们来看下内部是如何扭转和工作的吧，这里拿“小A转账给了小B100元钱”举例：</p> 
  <p><img src="https://img-blog.csdn.net/20180530013749435?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p> 
  <pre><code>1、**第一步**：小A会先用SHA256函数对自己的小纸条进行处理，得到一个固定长度的字符串，这个字符串就等价于这张小纸条。

2、**第二步**：xiaoA使用只有自己知道的那一把私钥，对上面固定长度的字符串进行再加密，生成一份名叫数字签名的字符串，这份数字签名能够充分证明是基于这张小纸条的。你可以这么理解，在现实中，你需要对某一份合同进行签署，万一有人拿你曾经在其他地方留下的签名复制黏贴后来怎么办？！最好的办法，就是在你每一次签名的时候，故意在字迹当中留下一些同这份合同存在某种信息关联的小细节，通过对小细节的观察可以知道这个签名有没有被移花接木。步骤一和步骤二的结合就是为了生成这样一份有且仅针对这条小纸条有效的签名。

3、**第三步**：小A将“明文的小纸条”、刚刚加密成功的“数字签名”，以及自己那把可以公布于众的“公钥”打包一起发给小B。

4、**第四步**：当小B收这三样东西，首先会将明文的小纸条进行SHA256()处理，得到一个字符串，我们将其命名为“字符串2”.然后，小B使用小A公布的公钥，对发过来的数字签名进行揭秘，得到另外一个“字符串1”。通过对比“字符串1”和“字符串2”的一致性，便可充分证明：小B接受到的小纸条就是小A发出来的小纸条，这张小纸条在中途没有被其他人所篡改；且这张小纸条确实是由小A所编辑。
</code></pre> 
  <p>可以看得出来，加密解密的过程几乎是一环套一环，中途任何环节被篡改，结果都是大相径庭。借助这一连串的机制，其实已经能够很好的在公开、匿名、彼此不信任的分布式网络环境中解决数字交易过程中可能遇到的很多问题。这个环节可能确实有点难理解，现在，我需要你停下来，静下心，花上几分钟闭幕慢慢回味其中设计精湛的地方。</p> 
  <p>掌握了这部分知识以后，我们在这里回答前面没有解释清楚的问题，“节点对区块的检验”检验的到底是什么？实际上就是“</p> 
  <pre><code>·检验区块内的交易记录签名是否准确（是否被篡改）
·检验区块内的交易记录输入值是否“有效”（是否使用过）
·检验区块内的交易记录输入值的数字之和是否大于等于输出值的数字
· ...
</code></pre> 
  <h2 id="重回区块和区块链的世界">重回“区块”和“区块链”的世界</h2> 
  <p>好了，对小纸条和交易记录的研究我们点到为止，其实信息量已经是巨大的了，让我们合上盖子，重回较大的实体，继续聊聊“区块”和“区块链”的话题。还记得，咱们在一开始讲到关于区块的特征吗？区块创造后被埋在地下，去要经过节点们马不停蹄的挖采、而且是凭运气的挖采才有可能获得——不仅仅如此，事实上它还有很多其他神奇的地方，比如说：</p> 
  <pre><code>1、凭空产生的区块在刚刚创建的时候会形成一股强大的黑洞效应，它会尝试将这段时间全世界各个节点上产生的所有小纸条（交易记录）统统吸进来；在合上区块盖子之前，同时会在区块内放上一些数字货币以及一些其他东西。

2、区块拥有一个唯一的ID，但它指挥在这个区块被节点成功从地下挖出来之后创建。这个ID至少会跟【区块内所有小纸条的集合】、【即将与之相连的上一个区块ID】以及【挖矿节点的运气值】等因素相关。既然前面我们已经简单了解了【SHA256()】函数这个东西，这里不妨透漏给大家：“区块ID = SHA256(’区块内所有小纸条的集合‘ + ’即将与之相连的上一个区块ID‘ + '挖矿节点的运气值' + '...')”，基于先前掌握的知识，然后你应该知道区块内任意一张小纸条的信息稍微做改动、或者节点挖矿运气好一点坏一点等等，当前区块的ID都会“biu~~~”的发生改变。
</code></pre> 
  <p>基于上述1、2点，如果阅读足够仔细的同学可能会有些头大。在文章的开头为了更好的简化区块链系统时故意摸棱两可了几个概念，这也许已经误导了部分同学。这里不得不停下来和你一起修正之前在你大脑中已经构建的区块链世界观。我们前面讲到，“在节点的视野里，大概每十分钟会凭空产生一个建立在自己平行宇宙世界的神奇区块”。如何正确去理解这句话呢？——拥有上帝之眼的你，可以这么拆解问题、看待问题：</p> 
  <pre><code>1、同一个周期内，全网并不是产生唯一的一个区块等待挖掘；每个节点事实上都在周期性的创造区块和挖出区块；只是在某一个节点的视野里，它不能感知到另外一个节点上区块的产生。为何这里特别强调“在某一个节点的视野里”，就是因为我们刚刚讲到，从区块的视角来说，区块的凭空产生，是基于即将与之相连的上一个区块ID；而从节点的视角来看，区块的凭空产生是基于当前节点区块链末尾的那个区块ID产生的。

2、全网会尽力控制在一个周期内只有一个节点能够成功挖出区块，但是不能够完全避免多个节点同时挖出区块的可能性；如何尽力控制？比如说，当大伙挖矿的热情高涨、工作效率提高，区块会被埋在更深更广的地方等等。简而言之，提高工作难度，来维持这个平衡。另外，值得注意的：产生区块、挖出区块、校验区块，他们的时间周期近乎相同。
</code></pre> 
  <p><em>对于想从技术角度更加深入理解“区块”、“挖矿”本质的同学，你们可以阅读《探索比特币“挖矿”和“区块”的数学本质》</em></p> 
  <h2 id="分叉">分叉</h2> 
  <p>现在，我们终于对“区块”这个概念有了更全面的认识，文章开头讲的故事就可以继续展开来絮叨絮叨：</p> 
  <p>假如几乎同一时间，【中国上海浦东新区张衡路】上的节点和【美国纽约曼哈顿第五大道】上的节点异口同声的喊出来：“我挖到区块了！里面的小纸条都是有效的！奖励归我！”。其他节点也几乎同时参与了对这两个区块的校验，结果发现这俩都没毛病，个节点也开始犯困，因为在他们的视野里他们并不清楚最后哪一个区块应该被主链接纳。算了！都连在自己区块链尾巴上吧，这时尴尬了，区块链被硬生生的分叉了！</p> 
  <p><img src="https://img-blog.csdn.net/20180531030754359?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="产生分叉" title=""></p> 
  <p>你肯定在想，那还得了，这种情况继续下去，每个节点的区块以及他们整理维护的小纸条都将变得不一样，这已经严重违背了区块链世界里第一大最基本原则——所有节点共同维护同一份数据。所以，为了解决这个问题，区块链世界引入了一条新的规则——拥有最多区块的支链将是真正被认可有价值的，较短的支链将会被直接Kill掉。</p> 
  <p>我们大伙都知道挖矿的过程存在巨大的工作量（如果没有任何难度，把区块仍在人群里，必然同一时间发现区块的节点数量将大大增加，也就会产生无数的支链，通过这个例子，你大概也就能够明白，比特币的区块链世界为什么要设置工作难度了吧），并且在计算机的硅基世界里，不可能出现所谓“同时”概念，哪怕纳秒的差别，那也总是会有先后顺序。所以理论上，“分叉”的这种僵局很快会在下一个区块被挖掘出来（以及校验区块）的时候被打破，实在不行下下个，或者下下下个…总之机制可以让整个分叉的区块链世界迅速稳定下来。</p> 
  <p><img src="https://img-blog.csdn.net/20180531031555138?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="分叉这种僵局在确认下一个区块（以及校验小纸条）的时候被打破，从而整个区块链世界迅速稳定下来" title=""></p> 
  <p>就上图而言，所有基于张衡路节点挖矿获得的区块以及后续区块的那条分支被视为有价值，最终会全部保留下来；其他节点会统一效仿那个拥有更长分支链的节点所做的决策。另外，值得一提的是，同一时间，较短分支上的区块会立即丢弃，而里面的小纸条也会随之释放出来，被重新标记为“未确认”。</p> 
  <h2 id="双花与51攻击">“双花”与“51%攻击”</h2> 
  <p>你可能已经开始困惑或者有点兴奋，末尾几个区块的排序在修复过程中，因为时间差肯定会产生一些摸棱两可的地方，这往往给数据安全埋下一颗雷。一个最简单的假设——我记录的一张小纸条很不巧的被归在了一条较短的支链上，这条支链在竞争过程中理所当然的输掉了比赛，区块被丢弃，小纸条被无情的贴上“未确认”的标签。在等待下次区块重新确认的过程中，这个时间差内，我，好像、似乎、可以做点什么坏事…就比如“双花”（花两次，双重支付的意思）</p> 
  <p>你脑海中也许很快浮过的这样的构想，可不可以通过下面这种方法出发双花问题的产生，从而让我不劳而获。</p> 
  <p><img src="https://img-blog.csdn.net/20180531074941735?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p> 
  <pre><code>1、假设有一个名叫X-Man的坏家伙，他控制了一个计算机节点，这个节点拥有比地球上任何一个节点计算能力都强的计算机集群。
2、首先，X-Man事先创造了一条独立的（不去广而告之）、含有比较多区块的链条。其中一个区块里放着“X-Man转账给X-Man 1000元”的纸条。
3、接着，X-Man跟张三购买了一部手机，他在小纸条上记录下“X-Man转账给张三1000元”。张三已经比一般的卖家谨慎了，他在这条信息被三次确认（即三个区块被真实挖出、校验和连接）才将手机给了X-Man。按照我们之前的理解，这条交易记录已经板上钉钉永远无法被篡改。
4、X-Man拿到手机之后，按下机房的开关，试图将先前已经创造的区块链条连接在自己这个节点区块链的末尾。
5、大功告成，X-Man拥有了一条更长的区块链条，那些较短、存放着“X-Man转账给张三1000元”的区块链，以及在区块链世界里那则真实转账行为被一同成功销毁。(???)
</code></pre> 
  <p>事实真实如此吗？在这里我可以负责的说，too young too simple，区块链世界的规则的制定远比我们想象的要健全的多，还记得我们之前讲的“区块的ID至少会跟区块内所有小纸条的集合、即将与之相连的上一个区块ID、当前产生区块的时间戳以及挖矿节点的运气值等因素相关”。在这里，正是因为打算连接到主链的过程中，主链会立马意识到，那条事先准备的链子（的第一个区块）的时间戳存在异常，不属于当前区块链世界里线性增长的时间戳，于是马上意识到这个事先准备的链子（的第一个区块）是无效的，需要重新计算。</p> 
  <p><img src="https://img-blog.csdn.net/20180601131111779?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0VMT1ZJTkZH/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p> 
  <p>在区块链的世界，重新计算的行为等同于把自己（节点）置身于同一个起跑线，跟世界上其他所有节点一同竞争挖矿。你会说，我拥有更强大的计算能力，但是对不起，跟你竞争的对象不是第五大道、南京西路、香榭丽舍大道上的某一个节点，而是全球所有计算能力的集合，在这个集合中，你拥有的计算能力永远都只是一个很小的子集。所以，根据区块链算力民主、少数服从多数的基本原则，这个构想将永远不会成立。</p> 
  <p><strong>除非…</strong></p> 
  <p>你控制着全球51%的算力，这也就是区块链世界里另外一个著名的概念，叫做“51%攻击”，但这也仅仅是一个理论值，在真实世界里这样的攻击我个人觉得是很难发动起来的，这里面就牵涉到很多经济、哲学甚至政治的因素。举个最简单的例子：X-Man为了回滚刚刚发生的一笔交易记录，成功发起了51%攻击，这意味着很快区块链系统将会崩盘，因为这次攻击已经严重伤害到人们对这套系统的信任，接着比特币开始暴跌至几乎一文不值；但是这个拥有51%算力的X-Man原本完完全全可以通过挖矿的方式获取更多收益，购买无数的Iphone手机。那他不是脑袋坏了还能使啥？对51%攻击的同学可以阅读这篇文章《什么是比特币51%攻击》</p> 
  <p>至此，我觉得区块链最基础、最核心的只是已经全部讲完了(除了挖矿内部实现原理，作为一个遗憾留在这里，有时间会完善掉)，相信你已经对它有了一个宏观的认识。另外，由于这篇文章采用了适当抽象、类举的叙事方式，中间或多或少有些地方会跟区块链底层严谨的技术事先有出入，欢迎大家来纠错。</p> 
  <p><strong>原文出处：<a href="https://www.zhihu.com/question/37290469" rel="nofollow">https://www.zhihu.com/question/37290469</a>，手打，侵权联系删除</strong></p> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/ELOVINFG/article/details/80518450,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/ELOVINFG/article/details/80518450,&quot;}">阅读更多</a> 
</div>
      <br />
        <a href="https://blog.uzzz.org/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://blog.uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://blog.uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    
    <script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
    </script>

  </body>
</html>
